@inherits LayoutComponentBase
@inject AuthService Auth
@inject NavigationManager Navigation
@inject IJSRuntime JS

<div class="d-flex flex-column min-vh-100">

    <nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
        <a class="navbar-brand fw-bold" href="/">WiseBlog</a>
    </nav>

    <main class="flex-fill p-4 bg-light">
        @Body
    </main>

    <footer class="bg-dark text-light text-center py-3 mt-auto">
        <small>&copy; 2025 WiseBlog</small>
    </footer>
</div>

@code {
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (!firstRender) return;

        await LoadUserFromAuthService();
    }

    private async Task LoadUserFromAuthService()
    {
        var json = await Auth.GetUserJsonAsync();
        await JS.InvokeVoidAsync("console.log", $"User data: {json}");
    }
}
